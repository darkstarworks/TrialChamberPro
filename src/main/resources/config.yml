# TrialChamberPro Configuration v1.0

# Database settings
database:
  type: SQLITE # SQLITE or MYSQL
  # MySQL settings (only used if type is MYSQL)
  host: localhost
  port: 3306
  database: trialchamberpro
  username: root
  password: ""
  pool-size: 10

# Global chamber settings
global:
  # Default reset interval in seconds
  # Set to 0 to disable automatic resets (manual reset only via /tcp reset or GUI)
  # Common values: 86400 (daily), 172800 (48h), 604800 (weekly)
  default-reset-interval: 172800
  reset-warning-times: [300, 60, 30] # Warnings in seconds before reset
  teleport-players-on-reset: true
  teleport-location: EXIT_POINT # EXIT_POINT, OUTSIDE_BOUNDS, or WORLD_SPAWN
  async-block-placement: true
  blocks-per-tick: 500
  auto-snapshot-on-register: true

# Generation settings
generation:
  # Maximum number of blocks allowed when generating/registering a chamber region
  # Keep this manageable for your server hardware
  max-volume: 750000
  blocks:
    # When using /tcp generate blocks <amount>, we may need to round up to reach minimum viable dimensions.
    # This is the maximum number of extra blocks allowed beyond the requested amount.
    rounding-allowance: 1000

# Vault settings
vaults:
  per-player-loot: true

  # Separate cooldowns for normal and ominous vaults
  # Set to -1 for permanent lock (vanilla behavior: once opened, stays locked until chamber reset)
  # Set to a positive number for time-based cooldowns (e.g., 24 = 24 hours)
  normal-cooldown-hours: -1
  ominous-cooldown-hours: -1

  # Visual indicators
  show-cooldown-particles: true
  particles:
    normal-available: VILLAGER_HAPPY
    normal-cooldown: SMOKE_NORMAL
    ominous-available: SOUL_FIRE_FLAME
    ominous-cooldown: SOUL

  # Sounds
  play-sound-on-open: true
  sounds:
    normal-open: BLOCK_VAULT_OPEN_SHUTTER
    ominous-open: BLOCK_VAULT_OPEN_SHUTTER
    cooldown: BLOCK_NOTE_BLOCK_BASS

# Protection settings
protection:
  enabled: true
  prevent-block-break: true
  prevent-block-place: true
  prevent-container-access: false
  allow-pvp: true
  prevent-mob-griefing: true
  worldguard-integration: true

# Trial Key settings
trial-keys:
  fix-paper-bugs: true
  prevent-duplication: true # Minimum protection. For free BIC protection, use DupeTrace https://modrinth.com/plugin/dupetrace
  max-stack-size: 16
  validate-key-type: true  # Ensure normal keys only open normal vaults

# Reset settings
reset:
  clear-ground-items: true
  remove-spawner-mobs: true
  remove-non-chamber-mobs: false
  # CRITICAL: Reset trial spawner state (clears tracked players).
  # When enabled, trial spawners will drop keys again after chamber reset.
  # Without this, spawners "remember" players who already completed them and won't give keys.
  # Vanilla behavior: 50% chance to drop a trial key for each player after all mobs are defeated.
  reset-trial-spawners: true
  reset-ominous-spawners: true  # Convert ominous spawners back to normal on reset
  clear-trial-omen-effect: true
  reset-vault-cooldowns: true  # Reset player vault cooldowns on chamber reset (REQUIRED for vanilla behavior)
  # Trial spawner cooldown configuration
  # This controls how long spawners stay inactive after players complete a wave
  # Set to -1 to use vanilla default (30 minutes / 36000 ticks)
  # Set to 0 to disable cooldown (spawners reactivate immediately)
  # Set to a positive number for custom cooldown in minutes
  spawner-cooldown-minutes: -1

  # Wild spawner cooldown (spawners OUTSIDE of registered chambers)
  # Same values as spawner-cooldown-minutes:
  # -1 = vanilla default (30 minutes), 0 = no cooldown, 1-60 = custom minutes
  # This allows controlling cooldown for unregistered Trial Chambers server-wide
  wild-spawner-cooldown-minutes: -1

# Performance
performance:
  cache-chamber-lookups: true
  cache-duration-seconds: 300
  async-database-operations: true
  time-tracking-interval: 300  # Flush time stats every 5 minutes (seconds)
  use-folialib: true  # Enable for Folia compatibility

# Statistics
statistics:
  enabled: true
  track-time-spent: true
  leaderboard-update-interval: 3600  # Update leaderboards hourly (seconds)
  top-players-count: 10

# Loot settings
loot:
  # Apply LUCK potion effect to loot generation
  # When enabled, players with the LUCK effect get bonus loot rolls
  # Each level of LUCK adds +1 extra roll (e.g., LUCK II = +2 rolls)
  apply-luck-effect: false

  # Maximum number of loot pools per loot table
  # Each pool rolls independently (like vanilla's common/rare/unique system)
  # GUI will limit pool editing to this number
  max-pools-per-table: 5

# Spawner Wave System
# Tracks trial spawner waves with boss bar progress display
spawner-waves:
  enabled: true
  show-boss-bar: true           # Show boss bar with wave progress
  detection-radius: 20          # Radius to detect players for boss bar display
  award-stats: true             # Track wave kills in player statistics
  completion-message: true      # Send message when wave is complete

# Spectator Mode
# Allows players to spectate chambers after death
spectator-mode:
  enabled: true
  offer-timeout: 30             # Seconds before spectate offer expires
  restrict-to-chamber: true     # Keep spectators within chamber bounds
  boundary-buffer: 10           # Extra blocks allowed outside chamber
  allow-solo-spectate: false    # Allow spectating empty chambers

# Debug mode
debug:
  verbose-logging: false
